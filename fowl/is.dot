digraph Is {
  label = "Predicative Classes"
  rankdir = BT

  node [fontname = monospace, style = filled, fillcolor = cornsilk]

  IsAntisym [label = "\N X Y\nantisym (x y : A) (a : Y x y) (b : Y y x) : X x y"]
  IsAsym [label = "\N X\nasym (x y : A) (a : X x y) (b : X y x) : 0"]
  IsConnex [label = "\N X\nconnex (x y : A) : X x y \\/ X y x"]
  IsCotrans [label = "\N X\ncotrans (x y z : A) (a : X x z) : X x y \\/ X y z"]
  IsIrrefl [label = "\N X\nirrefl (x : A) (a : X x x) : 0"]
  IsProper [label = "\N X\nproper (x : A) : X x x"]
  IsRefl [label = "\N X\nrefl (x : A) : X x x"]
  IsStrConnex [label = "\N X Y\nstr_connex (x y : A) : Y x y \\/ X x y \\/ Y y x"]
  IsSym [label = "\N X\nsym (x y : A) (a : X x y) : X y x"]
  IsTrans [label = "\N X\ntrans (x y z : A) (a : X x y) (b : X y z) : X x z"]

  subgraph cluster_order_theory_classes {
    label = "Order Theory"
  bgcolor = azure

    IsApart [label = "\N X"]
    IsEquiv [label = "\N X"]
    IsPartEquiv [label = "\N X"]
    IsPartOrd [label = "\N X Y"]
    IsPreord [label = "\N X"]
    IsStrPartOrd [label = "\N X"]
    IsStrPreord [label = "\N X"]
    IsStrTotOrd [label = "\N X Y"]
    IsTotOrd [label = "\N X Y"]
  }

  subgraph cluster_cancel {
  label = "Cancellative Fragment"
  bgcolor = azure
  IsCancelBinFnL [label = "\N X Y k\ncancel_bin_fn_l (x : A0) (y z : A1) (a : Y (k x y) (k x z)) : X y z"]
  IsCancelBinFnR [label = "\N X Y k\ncancel_bin_fn_r (x y : A0) (z : A1) (a : Y (k x z) (k y z)) : X x y"]
  IsCancelActL [label = "\N X al\ncancel_act_l (x : A) (a b : B) (s : X (al x a) (al x b)) : X a b"]
  IsCancelActLR [label = "\N X Y al\ncancel_act_l_r (x y : A) (a : B) (s : Y (al x a) (al y a)) : X x y"]
  IsCancelActR [label = "\N X ar\ncancel_act_r (a b : B) (x : A) (s : X (ar a x) (ar b x)) : X a b"]
  IsCancelActRL [label = "\N X Y ar\ncancel_act_r_l (a : B) (x y : A) (s : Y (ar a x) (ar a y)) : X x y"]
  IsCancelFormL [label = "\N X Y s\ncancel_form_l (a b c : B) (t : X (s a b) (s a c)) : Y b c"]
  IsCancelFormR [label = "\N X Y s\ncancel_form_r (a b c : B) (t : X (s a c) (s b c)) : Y a b"]
  IsCancelL [label = "\N X k\ncancel_l (x y z : A) (a : X (k x y) (k x z)) : X y z"]
  IsCancelR [label = "\N X k\ncancel_r (x y z : A) (a : X (k x z) (k y z)) : X x y"]
  IsInj [label = "\N X f\ninj (x y : A) (a : X (f x) (f y)) : X x y"]
  IsInjUnFn [label = "\N X Y f\ninj_un_fn (x y : A) (a : Y (f x) (f y)) : X x y"]
  }

  subgraph cluster_assoc {
  label = "Associative Fragment"
  bgcolor = azure
  IsAssoc [label = "\N X k\nassoc (x y z : A) : X (k x (k y z)) (k (k x y) z)"]
  IsCompatActL [label = "\N X k al\ncompat_act_l (x y : A) (a : B) : X (al x (al y a)) (al (k x y) a)"]
  IsCompatActR [label = "\N X k ar\ncompat_act_r (a : B) (x y : A) : X (ar a (k x y)) (ar (ar a x) y)"]
  IsCompatActs [label = "\N X al ar\ncompat_acts (x : A) (a : C) (y : B) : X (al x (ar a y)) (ar (al x a) y)"]
  IsCompatBinFns [label = "\N X k m n p\ncompat_bin_fns (x : A0) (y : A1) (z : A2) : X (n x (m y z)) (p (k x y) z)"]
  }

  subgraph cluster_distr {
  label = "Distributive Fragment"
  IsAntidistrUnOp [label = "\N X f k\nantidistr_un_op (x y : A) : X (f (k x y)) (k (f y) (f x))"]
  IsDistrActL [label = "\N X al k\ndistr_act_l (x : A) (a b : B) : X (al x (k a b)) (k (al x a) (al x b))"]
  IsDistrActR [label = "\N X ar k\ndistr_act_r (a b : B) (x : A) : X (ar (k a b) x) (k (ar a x) (ar b x))"]
  IsDistrFns [label = "\N X f g k h m\ndistr_fns (x : A0) (y : A1) : X (h (k x y)) (m (f x) (g y))"]
  IsDistrForms [label = "\N X f s g t\ndistr_forms (a b : C) : X (g (s a b)) (t (f a) (f b))"]
  IsDistrL [label = "\N X k m\ndistr_l (x y z : A) : X (k x (m y z)) (m (k x y) (k x z))"]
  IsDistrR [label = "\N X k m\ndistr_r (x y z : A) : X (k (m x y) z) (m (k x z) (k y z))"]
  IsDistrUnOp [label = "\N X f k\ndistr_un_op (x y : A) : X (f (k x y)) (k (f x) (f y))"]
  }

  subgraph cluster_inv {
  label = "Invertible Fragment"
  IsInvBinFnL [label = "\N X x f k\ninv_bin_fn_l (y : A) : X (k (f y) y) x"]
  IsInvBinFnR [label = "\N X x f k\ninv_bin_fn_r (y : A) : X (k y (f y)) x"]
  IsInvFormL [label = "\N X x f s\ninv_form_l (y : A) : X (s (f y) y) x"]
  IsInvFormR [label = "\N X x f s\ninv_form_r (y : A) : X (s y (f y)) x"]
  IsInvL [label = "\N X x f k\ninv_l (y : A) : X (k (f y) y) x"]
  IsInvR [label = "\N X x f k\ninv_r (y : A) : X (k y (f y)) x"]
  }

  subgraph cluster_unl {
  label = "Unital Fragment"
  IsUnlActL [label = "\N X x al\nunl_act_l (a : B) : X (al x a) a"]
  IsUnlActR [label = "\N X x ar\nunl_act_r (a : B) : X (ar a x) a"]
  IsUnlL [label = "\N X x k\nunl_l (y : A) : X (k x y) y"]
  IsUnlR [label = "\N X x k\nunl_r (y : A) : X (k y x) y"]
  }

  subgraph cluster_absorb {
  label = "Absorbing Fragment"
  bgcolor = azure
  IsAbsorbElemActLR [label = "\N X a al\nabsorb_elem_act_l_r (x : A) : X (al x a) a"]
  IsAbsorbElemActRL [label = "\N X a ar\nabsorb_elem_act_r_l (x : A) : X (ar a x) a"]
  IsAbsorbElemL [label = "\N X x k\nabsorb_elem_l (y : A) : X (k x y) x"]
  IsAbsorbElemR [label = "\N X x k\nabsorb_elem_r (y : A) : X (k y x) x"]
  IsFixed [label = "\N X x f\nfixed : X (f x) x"]
  IsIdemBinOp [label = "\N X k\nidem_bin_op (x : A) : X (k x x) x"]
  IsIdemElemBinOp [label = "\N X x k\nidem_elem_bin_op : X (k x x) x"]
  IsIdemElemUnOp [label = "\N X x f\nidem_elem_un_op : X (f x) x"]
  IsIdemUnOp [label = "\N X f\nidem_un_op (x : A) : X (f (f x)) (f x)"]
  IsInvol [label = "\N X f\ninvol (x : A) : X (f (f x)) x"]
  IsInvolElem [label = "\N X x f\ninvol_elem : X (f (f x)) x"]
  }

  subgraph cluster_comm {
  label = "Commutative Fragment"
  IsComm [label = "\N X k\ncomm (x y : A) : X (k x y) (k y x)", color = red, fillcolor = yellow]
  IsCommBinOp [label = "\N\ncomm (x y : A) : x * y = y * x", color = red, fillcolor = yellow]
  IsCommL [label = "\N\ncomm_l (x y : A) : (/ x) * y = / (x * y)", color = red, fillcolor = yellow]
  IsCommR [label = "\N\ncomm_r (x y : A) : x * (/ y) = / (x * y)", color = red, fillcolor = yellow]
  IsCommTorL [label = "\N\ncomm_tor_l (x y : B) : y / x = x / y", color = red, fillcolor = yellow]
  IsCommTorR [label = "\N\ncomm_tor_r (x y : B) : y / x = x / y", color = red, fillcolor = yellow]
  }

  IsBinPres [label = "\N X k m f\nbin_pres (x y : A) : X (f (k x y)) (m (f x) (f y))"]
  IsNullPres [label = "\N X x y f\nnull_pres : X (f x) y"]
  IsUnPres [label = "\N X f g h\nun_pres (x : A) : X (h (f x)) (g (h x))"]

  subgraph cluster_abstract_algebra_classes {
    label = "Abstract Algebra"

    IsAbsorbElem [label = "\N X x k"]
    IsCancel [label = "\N X k"]
    IsCancelForm [label = "\N X Y s"]
    IsDistr [label = "\N X k m"]
    IsGrp [label = "\N X x f k"]
    IsGrpActL [label = "\N X x f k Y al"]
    IsGrpHom [label = "\N X x f k Y y g m h"]
    IsInv [label = "\N X x f k"]
    IsInvForm [label = "\N X x f s"]
    IsMon [label = "\N X x k"]
    IsRing [label = "\N X x f k y m", color = red, fillcolor = yellow]
    IsSemigrp [label = "\N X k"]
    IsSemiring [label = "\N X x k y m", color = red, fillcolor = yellow]
    IsUnl [label = "\N X x k"]
  }

  IsDefl [label = "\N\ndeflate (x : A) : f x <= x", color = red, fillcolor = yellow]
  IsInfl [label = "\N\ninfl (x : A) : x <= f x", color = red, fillcolor = yellow]
  IsContract [label = "\N\ncontract (x y : A) : dist (f x) (f y) <= dist x y", color = red, fillcolor = yellow]
  IsExpand [label = "\N\nexpand (x y : A) : dist x y <= dist (f x) (f y)", color = red, fillcolor = yellow]
  IsCohOrdRels [label = "\N\ncoh_ord_rels (x y : A) : x < y <-> x <= y /\\ x <> y", color = red, fillcolor = yellow]
  IsInflateBinOpL [label = "\N\ninflate_bin_op_l (x y : A) : y <= x + y", color = red, fillcolor = yellow]
  IsInflateBinOpR [label = "\N\ninflate_bin_op_r (x y : A) : x <= x + y", color = red, fillcolor = yellow]
  IsStrComono [label = "\N\nstr_comono (x y : A) (a : f x < f y) : x < y", color = red, fillcolor = yellow]
  IsStrMono [label = "\N\nstr_mono (x y : A) (a : x < y) : f x < f y", color = red, fillcolor = yellow]
  IsComono [label = "\N\ncomono (x y : A) (a : f x <= f y) : x <= y", color = red, fillcolor = yellow]
  IsMono [label = "\N\nmono (x y : A) (a : x <= y) : f x <= f y", color = red, fillcolor = yellow]
  IsMonoBinOp [label = "\N\nmono_bin_op (x0 y0 : A) (a0 : x0 <= y0) (x1 y1 : A) (a1 : x1 <= y1) : x0 + x1 <= y0 + y1", color = red, fillcolor = yellow]
  IsMonoBinOpL [label = "\N\nmono_bin_op_l (x y z : A) (a : x <= y) : z + x <= z + y", color = red, fillcolor = yellow]
  IsMonoBinOpR [label = "\N\nmono_bin_op_r (x y z : A) (a : x <= y) : x + z <= y + z", color = red, fillcolor = yellow]
  IsUpperBnd [label = "\N\nupper_bnd (y : A) : y <= x", color = red, fillcolor = yellow]
  IsLowerBnd [label = "\N\nlower_bnd (y : A) : x <= y", color = red, fillcolor = yellow]

  subgraph cluster_ext {
  label = "Extensional Fragment"
  IsFunExt [label = "\N\nfun_ext (A B : Type) (f g : A -> B) (a : forall x : A, f x = g x) : f = g", color = red, fillcolor = yellow]
  IsFunExtDep [label = "\N\nfun_ext_dep (A : Type) (P : A -> Type) (f g : forall x : A, P x) (a : forall x : A, f x = g x) : f = g", color = red, fillcolor = yellow]
  IsPropExt [label = "\N\nprop_ext (A B) (a : A <-> B) : A = B", color = red, fillcolor = yellow]
  IsIsoL [label = "\N\niso_l (a : A) : g (f a) = a", color = red, fillcolor = yellow]
  IsIsoR [label = "\N\niso_r (b : B) : f (g b) = b", color = red, fillcolor = yellow]
  }

  subgraph cluster_hott {
  label = "Homotopy Fragment"
  IsContr [label = "\N\ncontr : exists x : A, forall y : A, x = y", color = red, fillcolor = yellow]
  IsProp [label = "\N\nirrel (x y : A) : x = y", color = red, fillcolor = yellow]
  IsSet [label = "\N\nuip (x y : A) (a b : x = y) : a = b", color = red, fillcolor = yellow]
  IsTrunc [label = "\N\ntrunc_zero (A : Type) : IsTrunc O A\ntrunc_succ (n : nat) (A : Type) : IsTrunc (S n) A", color = red, fillcolor = yellow]
  }

  node [style = dashed]

  // Fields

  edge [style = solid]

  subgraph order_theory_fields {
    IsApart -> IsCotrans
    IsApart -> IsIrrefl
    IsApart -> IsSym
    IsEquiv -> IsRefl
    IsEquiv -> IsSym
    IsEquiv -> IsTrans
    IsPartEquiv -> IsSym
    IsPartEquiv -> IsTrans
    IsPartOrd -> IsAntisym
    IsPartOrd -> IsEquiv
    IsPartOrd -> IsPreord
    IsPartOrd -> IsProper [constraint = false]
    IsPreord -> IsRefl
    IsPreord -> IsTrans
    IsStrPartOrd -> IsIrrefl
    IsStrTotOrd -> IsProper [constraint = false]
    IsStrPartOrd -> IsTrans
    IsStrPreord -> IsIrrefl
    IsStrPreord -> IsTrans
    IsStrTotOrd -> IsConnex
    IsStrTotOrd -> IsStrPartOrd
    IsTotOrd -> IsConnex
    IsTotOrd -> IsPartOrd
  }

  subgraph abstract_algebra_fields {
    IsAbsorbElem -> IsAbsorbElemL
    IsAbsorbElem -> IsAbsorbElemR
    IsCancel -> IsCancelL
    IsCancel -> IsCancelR
    IsCancelForm -> IsCancelFormL
    IsCancelForm -> IsCancelFormR
    IsDistr -> IsDistrL
    IsDistr -> IsDistrR
    IsGrp -> IsInv
    IsGrp -> IsMon
    IsGrp -> IsProper [constraint = false]
    IsGrpActL -> IsCompatActL
    IsGrpActL -> IsGrp
    IsGrpActL -> IsUnlActL
    IsGrpActL -> IsProper [constraint = false]
    IsGrpHom -> IsBinPres
    IsGrpHom -> IsGrp
    IsGrpHom -> IsGrp
    IsGrpHom -> IsProper [constraint = false]
    IsInv -> IsInvL
    IsInv -> IsInvR
    IsInvForm -> IsInvFormL
    IsInvForm -> IsInvFormR
    IsMon -> IsSemigrp
    IsMon -> IsUnl
    IsSemigrp -> IsAssoc
    IsSemigrp -> IsEquiv
    IsSemigrp -> IsProper [constraint = false]
    IsUnl -> IsUnlL
    IsUnl -> IsUnlR
  }

  edge [color = red]

  IsIsoLR -> IsIsoL
  IsIsoLR -> IsIsoR
  IsRing -> IsCommBinOp
  IsRing -> IsDistr
  IsRing -> IsGrp
  IsRing -> IsMon
  IsSemiring -> IsAbsorbElem
  IsSemiring -> IsCommBinOp
  IsSemiring -> IsDistr
  IsSemiring -> IsMon

  // Derivations

  edge [style = dashed]

  edge [color = black]

  subgraph order_theory_derivations {
    IsConnex -> IsStrConnex
    IsEquiv -> IsPartEquiv
    IsEquiv -> IsPreord
    IsPartOrd -> IsRefl
    IsPartOrd -> IsTrans
    IsStrPartOrd -> IsAsym
    IsStrPartOrd -> IsStrPreord
    IsStrTotOrd -> IsAsym
    IsStrTotOrd -> IsIrrefl
    IsStrTotOrd -> IsTrans
    IsTotOrd -> IsAntisym
    IsTotOrd -> IsRefl
    IsTotOrd -> IsTrans
  }

  subgraph abstract_algebra_derivations {
    IsAbsorbElemActLR -> IsFixed [label = "id"]
    IsAbsorbElemActRL -> IsFixed [label = "flip"]
    IsAbsorbElemActRL -> IsAbsorbElemActLR [label = "flip"]
    IsAssoc -> IsCompatBinFns
    IsCancelActL -> IsCancelBinFnL
    IsCancelActLR -> IsCancelBinFnR
    IsCancelActR -> IsCancelBinFnR
    IsCancelActRL -> IsCancelBinFnL
    IsCancelBinFnL -> IsCancelBinFnR [label = "flip"]
    IsCancelBinFnL -> IsInjUnFn [label = "id"]
    IsCancelBinFnR -> IsInjUnFn [label = "flip"]
    IsCancelFormL -> IsCancelBinFnL
    IsCancelFormR -> IsCancelBinFnR
    IsCancelL -> IsCancelBinFnL
    IsCancelR -> IsCancelBinFnR
    IsCompatActL -> IsCompatBinFns
    IsCompatActR -> IsCompatBinFns
    IsCompatActs -> IsCompatBinFns
    IsDistrActL -> IsDistrUnOp [style = dotted]
    IsDistrActR -> IsDistrUnOp [style = dotted]
    IsDistrForms -> IsDistrFns
    IsDistrL -> IsDistrActL
    IsDistrR -> IsDistrActR
    IsDistrUnOp -> IsDistrForms
    IsGrp -> IsAntidistrUnOp
    IsGrp -> IsCancel
    IsGrp -> IsFixed
    IsGrp -> IsInj
    IsGrp -> IsInvol
    IsGrpHom -> IsNullPres
    IsGrpHom -> IsUnPres
    IsIdemBinOp -> IsIdemElemBinOp [label = "id"]
    IsIdemUnOp -> IsIdemElemUnOp [label = "id"]
    IsInvol -> IsInvolElem [label = "id"]
    IsInj -> IsInjUnFn
    IsInv -> IsInvForm
    IsInvFormL -> IsInvBinFnL
    IsInvFormR -> IsInvBinFnR
    IsInvL -> IsInvFormL
    IsInvR -> IsInvFormR
    IsUnlL -> IsUnlActL
    IsUnlR -> IsUnlActR
  }

  edge [color = red]

  IsCommTorL -> IsCommBinOp
  IsCommTorR -> IsCommBinOp
  IsContr -> IsProp
  IsContr -> IsTrunc
  IsFunExtDep -> IsFunExt
  IsMono -> IsStrMono
  IsMonoBinOp -> IsMonoBinOpL
  IsMonoBinOp -> IsMonoBinOpR
  IsProp -> IsSet
  IsProp -> IsTrunc
  IsRing -> IsAbsorbElem
  IsRing -> IsComm
  IsRing -> IsSemiring
  IsSet -> IsTrunc
  IsStrMono -> IsMono
  IsTrunc -> IsContr
  IsTrunc -> IsProp
  IsTrunc -> IsSet

  // Specializations

  edge [style = dotted]

  edge [color = black]

  IsConnex -> IsComm
  IsSym -> IsComm

  edge [color = red]
}
